<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tan: Implicit Type Cast</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tan<span id="projectnumber">&#160;0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="concepts.html"><span>Concepts</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Implicit Type Cast </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Supported Implicit Type Cast</h1>
<p>The table specifies all legal implicit type conversion in this language. <code>char</code> is considered as an unsigned integer whose size is 1 byte. The specific behaviors of these casts are listed in the next section.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">index   </th><th class="markdownTableHeadNone">From   </th><th class="markdownTableHeadNone">To    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">int   </td><td class="markdownTableBodyNone">int with the same signedness with a bigger size    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">unsigned int   </td><td class="markdownTableBodyNone">signed int with a bigger size    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">signed int   </td><td class="markdownTableBodyNone">unsigned int that with a bigger size    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">float with a bigger size    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">int   </td><td class="markdownTableBodyNone">float    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">bool   </td><td class="markdownTableBodyNone">any type of int or float    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">7   </td><td class="markdownTableBodyNone">int/float/pointer   </td><td class="markdownTableBodyNone">bool    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">8   </td><td class="markdownTableBodyNone">pointer of a derived class   </td><td class="markdownTableBodyNone">pointer to the base class    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">9   </td><td class="markdownTableBodyNone">int/float that is compile-time known   </td><td class="markdownTableBodyNone">int/float that can fit the value   </td></tr>
</table>
<p>The most common use cases is that when operands of a binary operation have different types, one of them will have its type converted to the other's.</p>
<p>NOTE: if multiple implicit cast rules can apply, the compiler use the rule with a lower index. For example,</p>
<div class="fragment"><div class="line">// rule #6 or #7?</div>
<div class="line">var b = true;</div>
<div class="line">var i = 100;</div>
<div class="line">print(b + i); // 101</div>
<div class="line"> </div>
<div class="line">// rule #2 or #3?</div>
<div class="line">var u: u32 = 100;</div>
<div class="line">var s = 100;</div>
<div class="line">var res = s + u; // type is unsigned</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2"></a>
Implicit Type Casting in Function Calls</h1>
<p>In function calls, arguments can be implicitly converted into the parameter types if allowed.</p>
<div class="fragment"><div class="line">fn square(a: float): float {</div>
<div class="line">    return a * 2;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">square(-100); // works</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Behaviors of Type Casts</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
Primitive Types</h2>
<ul>
<li>Casting between two integers of the same size is a no-op</li>
<li>Casting from a larger integer to a smaller integer will truncate</li>
<li>Casting from a smaller integer to a larger integer will<ul>
<li>zero-extend if the source is unsigned</li>
<li>sign-extend if the source is signed</li>
</ul>
</li>
<li>Casting from a float to an integer will round the float towards zero<ul>
<li><code>NaN</code> will return 0</li>
<li>Values larger than the maximum integer value will saturate to the maximum value of the integer type</li>
<li>Values smaller than the minimum integer value will saturate to the minimum value of the integer type</li>
</ul>
</li>
<li>Casting from an integer to float will produce the closest possible float<ul>
<li>if necessary, rounding is according to roundTiesToEven mode</li>
<li>on overflow, infinity (of the same sign as the input) is produced</li>
</ul>
</li>
<li>Casting from an <code>f32</code> to an <code>f64</code> is perfect and lossless</li>
<li>Casting from an <code>f64</code> to an <code>f32</code> will produce the closest possible <code>f32</code><ul>
<li>if necessary, rounding is according to roundTiesToEven mode</li>
<li>on overflow, infinity (of the same sign as the input) is produced</li>
</ul>
</li>
<li>Casting from a numerical type <code>n</code> to <code>bool</code> is equivalent to <code>n != 0</code><ul>
<li>for float, <code>NaN</code> is <code>false</code></li>
</ul>
</li>
<li><code>false</code> casts to <code>0</code>, <code>true</code> casts to <code>1</code></li>
<li><code>char</code> casts to the value of the code point, then uses a numeric cast if needed.</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
Pointers</h2>
<p>TODO</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Arrays and Pointers</h2>
<p>TODO </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
