`tan` programming language
===

[![codecov](https://codecov.io/gh/tjysdsg/tan/branch/master/graph/badge.svg)](https://codecov.io/gh/tjysdsg/tan)

*Work In Progress*

# Build Instructions

## Prerequisites

- Make sure to clone this repository using `git clone --recursive`, see submodules under [dep/](dep)
- [CMake](https://cmake.org/download) >=3.19
- [LLVM 15](https://releases.llvm.org/download.html) tools and development libraries
- See [Dockerfile](Dockerfile) for a full list of dependencies

## Building and Testing

`tan` uses CMake as its build system.
To build the project, run the following command in project root directory

```shell script
mkdir -p build
cd build
cmake ..
make tests
```

### CMake options

- `ENABLE_COVERAGE`: bool, Enable test coverage, default OFF
- `BUILD_EXAMPLES`: bool, Build `tan` examples, default OFF
- `ENABLE_CCACHE`: Enable ccache (if installed) for faster rebuilding, default ON
- `ENABLE_CCACHE`: bool, Enable ccache to speed up rebuilding, default ON
- `LLVM_ROOT_DIR`: Custom LLVM location
- `CLANG_ROOT_DIR`: Custom CLANG location
- `LLD_ROOT_DIR`: Custom CLANG location

# Project Structure

- dep: third-party dependencies
- docs: documentations generated by Doxygen
- examples: example programs written in tan and C
- fuzzing: tools for fuzz testing
- runtime: `tan` runtime source files (in tan and C++)
- scripts: utility scripts
- include: public headers
- src: source files
    - analysis: code analysis and type checking
    - ast: Abstract Syntax Tree
    - backtrace: wrapper around libbacktrace
    - base: basic functionalities
    - cli: commandline interface of tanc compiler
    - codegen: LLVM IR and binary object generation
    - compiler: compiler driver
    - lexer: lexer
    - lib: library sources
    - linker: linker implemented using clang
    - parser: parser
- test:
    - test_exec: executable compilation tests
    - test_lib: library compilation tests
